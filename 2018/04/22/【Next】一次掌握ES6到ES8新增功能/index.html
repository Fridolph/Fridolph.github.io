<!DOCTYPE html><html><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="【Next】一次掌握ES6到ES8新增功能"><meta name="keywords" content="es6,ES标准"><meta name="author" content="Fridolph,undefined"><meta name="copyright" content="Fridolph"><title>【Next】一次掌握ES6到ES8新增功能 | 霪霖笙箫的博客</title><link rel="shortcut icon" href="/favicon.ico"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css?version=1.5.3"><meta http-equiv="Cache-Control" content="no-cache,no-store,must-revalidate"><meta http-equiv="Pragma" content="no-cache"><meta http-equiv="Expires" content="0"><link rel="dns-prefetch" href="https://cdn.staticfile.org"><link rel="dns-prefetch" href="https://cdn.bootcss.com"><link rel="dns-prefetch" href="https://creativecommons.org"><link rel="dns-prefetch" href="https://hm.baidu.com"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?https://hm.baidu.com/hm.js?08804673a5fe37365758820497cd9fb1";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();</script><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  localSearch: {"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}"},"path":"search.xml"}
} </script></head><body><canvas class="fireworks"></canvas><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar"><div class="toggle-sidebar-info text-center"><span data-toggle="切换文章详情">切换站点概览</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Array"><span class="toc-number">1.</span> <span class="toc-text">Array</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Array-prototype-includes"><span class="toc-number">1.1.</span> <span class="toc-text">Array.prototype.includes</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Object"><span class="toc-number">2.</span> <span class="toc-text">Object</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-Object-values"><span class="toc-number">2.1.</span> <span class="toc-text">1. Object.values()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-Object-entries"><span class="toc-number">2.2.</span> <span class="toc-text">2. Object.entries()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-Object-getOwnPropertyDescriptors"><span class="toc-number">2.3.</span> <span class="toc-text">3. Object.getOwnPropertyDescriptors</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-剩余对象属性"><span class="toc-number">2.4.</span> <span class="toc-text">4. 剩余对象属性</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#String"><span class="toc-number">3.</span> <span class="toc-text">String</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-String-padding-字符串填充"><span class="toc-number">3.1.</span> <span class="toc-text">1. String padding 字符串填充</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#正则扩展"><span class="toc-number">4.</span> <span class="toc-text">正则扩展</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-s-模式"><span class="toc-number">4.1.</span> <span class="toc-text">1. s 模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-RegExp命名组捕获"><span class="toc-number">4.2.</span> <span class="toc-text">2. RegExp命名组捕获</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-使用命名组"><span class="toc-number">4.3.</span> <span class="toc-text">3. 使用命名组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-在字符串中使用命名组"><span class="toc-number">4.4.</span> <span class="toc-text">4. 在字符串中使用命名组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-正则向后插入断言"><span class="toc-number">4.5.</span> <span class="toc-text">5. 正则向后插入断言</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-正则匹配unicode"><span class="toc-number">4.6.</span> <span class="toc-text">6. 正则匹配unicode</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Other"><span class="toc-number">5.</span> <span class="toc-text">Other</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-用来替代-Math-pow"><span class="toc-number">5.1.</span> <span class="toc-text">1. ** 用来替代 Math.pow</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-在函数参数中添加尾随逗号，现在不会报错了"><span class="toc-number">5.2.</span> <span class="toc-text">2. 在函数参数中添加尾随逗号，现在不会报错了</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-async-await"><span class="toc-number">5.3.</span> <span class="toc-text">3. async/await</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-Promise-prototype-finally"><span class="toc-number">5.4.</span> <span class="toc-text">4. Promise.prototype.finally()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-异步迭代器"><span class="toc-number">5.5.</span> <span class="toc-text">5. 异步迭代器</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#总结"><span class="toc-number">6.</span> <span class="toc-text">总结</span></a></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="/img/config/avatar.jpg"></div><div class="author-info__name text-center">Fridolph</div><div class="author-info__description text-center"></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">文章</span><span class="pull-right">58</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">标签</span><span class="pull-right">69</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">分类</span><span class="pull-right">14</span></a></div></div><div class="unit"><div class="heart"><div class="heart-piece-0"></div><div class="heart-piece-1"></div><div class="heart-piece-2"></div><div class="heart-piece-3"></div><div class="heart-piece-4"></div><div class="heart-piece-5"></div><div class="heart-piece-6"></div><div class="heart-piece-7"></div><div class="heart-piece-8"></div></div><p class="anime-title"><a href="https://github.com/fridolph" target="_blank">感谢访问本站，若喜欢请star ^_^</a></p></div></div><div id="content-outer"><div id="top-container" style="background-image: url(/img/config/top-img.png)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">霪霖笙箫的博客</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus"><a class="site-page" href="/">个人主页</a><a class="site-page" href="/archives">文章总览</a><a class="site-page" href="/books">图书推荐</a><a class="site-page" href="/demo">项目实战</a><a class="site-page" href="/gallery">时光轨迹</a></span></div><div id="post-info"><div id="post-title">【Next】一次掌握ES6到ES8新增功能</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-04-22</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/JavaScript/">JavaScript</a><span class="post-meta__separator">|</span><i class="fa fa-comment-o post-meta__icon" aria-hidden="true"></i><a href="/2018/04/22/【Next】一次掌握ES6到ES8新增功能/#disqus_thread"><span class="disqus-comment-count" data-disqus-identifier="2018/04/22/【Next】一次掌握ES6到ES8新增功能/"></span></a><div class="post-meta-wordcount"><span>字数总计: </span><span class="word-count">1,911</span><span class="post-meta__separator">|</span><span>阅读时长: 9 分钟</span></div></div></div></div><div class="layout" id="content-inner"><article id="post"><div id="post-content"><blockquote>
<p>转自 <a href="https://medium.freecodecamp.org/here-are-examples-of-everything-new-in-ecmascript-2016-2017-and-2018-d52fa3b5a70e" target="_blank" rel="noopener">https://medium.freecodecamp.org/here-are-examples-of-everything-new-in-ecmascript-2016-2017-and-2018-d52fa3b5a70e</a><br>作者 rajaraodv<br>感觉挺好的，就搬过来了，很多代码值得敲一遍多多回顾理解</p>
</blockquote>
<a id="more"></a>
<h2 id="Array"><a href="#Array" class="headerlink" title="Array"></a>Array</h2><h3 id="Array-prototype-includes"><a href="#Array-prototype-includes" class="headerlink" title="Array.prototype.includes"></a>Array.prototype.includes</h3><p>找到数组中是否包含某项，直接返回布尔值（能找到NaN）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="literal">NaN</span>]</span><br><span class="line"><span class="comment">// 之前</span></span><br><span class="line"><span class="keyword">if</span> (arr.indexOf(<span class="number">3</span>) &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="literal">true</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 推荐</span></span><br><span class="line"><span class="keyword">if</span> (arr.includes(<span class="number">3</span>)) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="literal">true</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ps: includes还可以用来判断是否包含NaN</span></span><br><span class="line">arr.includes(<span class="literal">NaN</span>) <span class="comment">// true</span></span><br><span class="line">arr.indexOf(<span class="literal">NaN</span>) <span class="comment">// -1</span></span><br></pre></td></tr></table></figure>
<h2 id="Object"><a href="#Object" class="headerlink" title="Object"></a>Object</h2><h3 id="1-Object-values"><a href="#1-Object-values" class="headerlink" title="1. Object.values()"></a>1. Object.values()</h3><p>这个还好，我们已经在使用了，原来还是es7的。Object.values()是一个类似于Object.keys()的新函数，但是它返回了对象自身属性的所有值，不包括原型链中的任何值。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> cars = &#123;<span class="attr">BMW</span>: <span class="number">3</span>, <span class="attr">Tesla</span>: <span class="number">2</span>, <span class="attr">Toyota</span>: <span class="number">1</span>&#125;</span><br><span class="line"><span class="comment">// es6</span></span><br><span class="line"><span class="keyword">const</span> vals = <span class="built_in">Object</span>.keys(cars).map(<span class="function"><span class="params">key</span> =&gt;</span> cars[key])</span><br><span class="line"><span class="built_in">console</span>.log(vals) <span class="comment">// [3,2,1]</span></span><br><span class="line"><span class="comment">// use</span></span><br><span class="line"><span class="keyword">const</span> values = <span class="built_in">Object</span>.values(cars) <span class="comment">// [3,2,1]</span></span><br></pre></td></tr></table></figure>
<h3 id="2-Object-entries"><a href="#2-Object-entries" class="headerlink" title="2. Object.entries()"></a>2. Object.entries()</h3><p>同上，返回的是 由键值对组成的数组的数组集合~ 好像解释得绕了，我们还是看代码吧：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> cars = &#123;<span class="attr">BMW</span>: <span class="number">3</span>, <span class="attr">Tesla</span>: <span class="number">2</span>, <span class="attr">Toyota</span>: <span class="number">1</span>&#125;</span><br><span class="line"><span class="keyword">const</span> ret = <span class="built_in">Object</span>.entries(cars) <span class="comment">// [ [BWM, 3], [Tesla, 2], [Toyota, 1] ]</span></span><br><span class="line"><span class="comment">// 场景1 - 利用解构赋值，直接拿到 k v </span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [key, val] <span class="keyword">of</span> <span class="built_in">Object</span>.entries(cars)) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`key: <span class="subst">$&#123;key&#125;</span>, value: <span class="subst">$&#123;val&#125;</span>`</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 场景2 - 将拿到的 kv对存到 Map中</span></span><br><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>(<span class="built_in">Object</span>.entries(cars))</span><br><span class="line"><span class="built_in">console</span>.log(map) <span class="comment">// Map(3) &#123;"BMW" =&gt; 3, "Tesla" =&gt; 2, "Toyota" =&gt; 1&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="3-Object-getOwnPropertyDescriptors"><a href="#3-Object-getOwnPropertyDescriptors" class="headerlink" title="3. Object.getOwnPropertyDescriptors"></a>3. Object.getOwnPropertyDescriptors</h3><p>该方法返回给定对象的所有属性的所有细节(包括getter getand setter set方法)。<br>添加这一功能的主要动机是允许浅层复制/克隆一个对象到另一个对象，该对象也复制getter和setter函数。</p>
<p>而`Object.assign 浅复制原始源对象的getter和setter函数外的所有细节。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> Car = &#123;</span><br><span class="line">  name: <span class="string">'BWM'</span>,</span><br><span class="line">  price: <span class="number">10000</span>,</span><br><span class="line">  set discount(x) &#123;</span><br><span class="line">    <span class="keyword">this</span>.d = x</span><br><span class="line">  &#125;,</span><br><span class="line">  get discount() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.d</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.getOwnPropertyDescriptor(Car, <span class="string">'discount'</span>)) <span class="comment">// 返回某一属性</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.getOwnPropertyDescriptors(Car) <span class="comment">// 返回所有属性</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> oCar = <span class="built_in">Object</span>.assign(&#123;&#125;, Car)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.getOwnPropertyDescriptors(oCar)) <span class="comment">// 没有了discount的 getter setter</span></span><br></pre></td></tr></table></figure>
<h3 id="4-剩余对象属性"><a href="#4-剩余对象属性" class="headerlink" title="4. 剩余对象属性"></a>4. 剩余对象属性</h3><p>点点点的扩展，- - 其实用得很多了，比如写redux里经常~~</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123;firstName, age, ...remaining &#125; = &#123;</span><br><span class="line">  firstName: <span class="string">'hello'</span>,</span><br><span class="line">  lastName: <span class="string">'world'</span>,</span><br><span class="line">  age: <span class="number">24</span>,</span><br><span class="line">  height: <span class="number">170</span>,</span><br><span class="line">  hoby: <span class="string">'coding'</span></span><br><span class="line">&#125;</span><br><span class="line">firstName <span class="comment">// hello</span></span><br><span class="line">age <span class="comment">// 24</span></span><br><span class="line">remaining <span class="comment">// &#123; lastName: 'world', height: 170, hoby: 'coding' &#125;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>可以用这一点，删除对象中不需要的属性</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123;SSN, ...cleanObj&#125; = &#123;</span><br><span class="line">  SSN: <span class="string">'xxx'</span>,</span><br><span class="line">  name: <span class="string">'fri'</span>,</span><br><span class="line">  age: <span class="number">24</span></span><br><span class="line">&#125;</span><br><span class="line">cleanObj <span class="comment">// &#123;name: 'fri', age: 24&#125;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>当然，还可以利用这一点扩展对象属性</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> p1 = &#123;<span class="attr">name</span>: <span class="string">'fri'</span>, <span class="attr">age</span>: <span class="number">24</span>&#125;</span><br><span class="line"><span class="keyword">let</span> p2 = &#123;<span class="attr">name</span>: <span class="string">'yk'</span>, <span class="attr">hobby</span>: <span class="string">'coding'</span>&#125;</span><br><span class="line"><span class="keyword">let</span> person = &#123;...p1, ...p2&#125; <span class="comment">// &#123;name: "yk", age: 24, hobby: "coding"&#125; 有同名key后面的会覆盖前面的</span></span><br></pre></td></tr></table></figure>
<h2 id="String"><a href="#String" class="headerlink" title="String"></a>String</h2><h3 id="1-String-padding-字符串填充"><a href="#1-String-padding-字符串填充" class="headerlink" title="1. String padding 字符串填充"></a>1. String padding 字符串填充</h3><p>允许将空字符串或其他字符串添加到原始字符串的开头或结尾。直接上代码：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'5'</span>.padStart(<span class="number">10</span>)  <span class="comment">// "         5" 不传第二个参数默认填充空格</span></span><br><span class="line"><span class="string">'5'</span>.padStart(<span class="number">10</span>, <span class="string">'=*'</span>)  <span class="comment">// "=*=*=*=*=5" 第一个参数决定返回字符串的length，第二个参数用于填充，但会保留初始字符串</span></span><br><span class="line"></span><br><span class="line"><span class="string">'fri'</span>.padEnd(<span class="number">10</span>)  <span class="comment">// "fri       "  和padStart类似，不过是在末尾加</span></span><br><span class="line"><span class="string">'fri'</span>.padEnd(<span class="number">10</span>, <span class="string">'|--|'</span>)  <span class="comment">// "fri|--||--" 字符串最大长度为10，所以最终成这样</span></span><br></pre></td></tr></table></figure>
<p>我们来看一个高级点的用法，用于游戏，或是渲染字符串图片等很有用：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> formatted = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">12</span>, <span class="number">123</span>, <span class="number">1234</span>, <span class="number">12345</span>].map(<span class="function"><span class="params">num</span> =&gt;</span> (</span><br><span class="line">  num.toString().padStart(<span class="number">10</span>, <span class="string">'0'</span>)</span><br><span class="line">))</span><br><span class="line"><span class="built_in">console</span>.log(formateed)</span><br><span class="line"><span class="comment">/* [</span></span><br><span class="line"><span class="comment">  "0000000000", </span></span><br><span class="line"><span class="comment">  "0000000001", </span></span><br><span class="line"><span class="comment">  "0000000012", </span></span><br><span class="line"><span class="comment">  "0000000123", </span></span><br><span class="line"><span class="comment">  "0000001234", </span></span><br><span class="line"><span class="comment">  "0000012345"</span></span><br><span class="line"><span class="comment">] */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> cars = &#123;</span><br><span class="line">  <span class="string">'😀BWM'</span>: <span class="string">'10'</span></span><br><span class="line">  <span class="string">'😎Tesla'</span>: <span class="string">'5'</span>,</span><br><span class="line">  <span class="string">'😝Lamborghini'</span>: <span class="string">'0'</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">Object</span>.entries(cars).map(<span class="function">(<span class="params">[name, count]</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;name.padEnd(<span class="number">20</span>, <span class="string">' -'</span>)&#125;</span> Count: <span class="subst">$&#123;padStart(<span class="number">3</span>, <span class="string">'0'</span>)&#125;</span>`</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 😀BWM - - - - - - - Count: 010</span></span><br><span class="line"><span class="comment">// 😎Tesla - - - - - - Count: 010</span></span><br><span class="line"><span class="comment">// 😝Lamborghini - - - Count: 010</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>注：在Emojis和其他双字节字符上使用padStart和padEnd，一个emoji表情是2个字符</p>
</blockquote>
<h2 id="正则扩展"><a href="#正则扩展" class="headerlink" title="正则扩展"></a>正则扩展</h2><h3 id="1-s-模式"><a href="#1-s-模式" class="headerlink" title="1. s 模式"></a>1. <code>s</code> 模式</h3><p>这种增强使得点操作符可以匹配任何单个字符。为了确保这不会破坏任何东西，我们需要使用\s标志，当我们创建RegEx来工作时。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/first.second/s.test(<span class="string">'first\nsecond'</span>); <span class="comment">//true</span></span><br></pre></td></tr></table></figure>
<h3 id="2-RegExp命名组捕获"><a href="#2-RegExp命名组捕获" class="headerlink" title="2. RegExp命名组捕获"></a>2. RegExp命名组捕获</h3><p>在下面的例子中，我们使用<code>(?&lt;year&gt;) (?&lt;month&gt;) (?&lt;day&gt;)</code>名称来分组日期RegEx的不同部分。产生的对象现在将包含具有属性年、月、日和相应值的组属性。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// before</span></span><br><span class="line"><span class="keyword">let</span> re1 = <span class="regexp">/(\d&#123;4&#125;)-(\d&#123;2&#125;)-(\d&#123;2&#125;)/</span></span><br><span class="line"><span class="keyword">let</span> ret1 = re1.exec(<span class="string">'2015-01-02'</span>)</span><br><span class="line"><span class="built_in">console</span>.log(ret1) <span class="comment">// ["2015-01-02", "2015", "01", "02", index: 0, input: "2015-01-02", groups: undefined]</span></span><br><span class="line"><span class="comment">// after</span></span><br><span class="line"><span class="keyword">let</span> re2 = <span class="regexp">/(?&lt;year&gt;\d&#123;4&#125;)-(?&lt;month&gt;\d&#123;2&#125;)-(?&lt;day&gt;\d&#123;2&#125;)/</span></span><br><span class="line"><span class="keyword">let</span> ret2 = re2.exec(<span class="string">'2015-01-02'</span>)</span><br><span class="line"><span class="built_in">console</span>.log(ret2.goups) <span class="comment">// &#123;year: "2015", month: "01", day: "02"&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="3-使用命名组"><a href="#3-使用命名组" class="headerlink" title="3. 使用命名组"></a>3. 使用命名组</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> sameWords = <span class="regexp">/(?&lt;fruit&gt;apple|orange)==\k&lt;fruit&gt;/u</span>;</span><br><span class="line">sameWords.test(<span class="string">'apple==apple'</span>)   <span class="comment">// true</span></span><br><span class="line">sameWords.test(<span class="string">'orange==orange'</span>) <span class="comment">// true</span></span><br><span class="line">sameWords.test(<span class="string">'apple==orange'</span>)  <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
<h3 id="4-在字符串中使用命名组"><a href="#4-在字符串中使用命名组" class="headerlink" title="4. 在字符串中使用命名组"></a>4. 在字符串中使用命名组</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> re = <span class="regexp">/(?&lt;firstName&gt;[A-Za-z]+) (?&lt;lastName&gt;[A-Za-z]+$)/u</span>;</span><br><span class="line"><span class="string">'Raja Rao'</span>.replace(re, <span class="string">'$&lt;lastName&gt;, $&lt;firstName&gt;'</span>) <span class="comment">// 'Rao Raja'</span></span><br></pre></td></tr></table></figure>
<h3 id="5-正则向后插入断言"><a href="#5-正则向后插入断言" class="headerlink" title="5. 正则向后插入断言"></a>5. 正则向后插入断言</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/(?<span class="xml"><span class="tag">&lt;<span class="name">=#).*</span>/<span class="attr">.test</span>('<span class="attr">winning</span>') // <span class="attr">false</span></span></span></span><br><span class="line"><span class="xml">/(?<span class="tag">&lt;<span class="name">=#).*</span>/<span class="attr">.test</span>('#<span class="attr">winning</span>') // <span class="attr">true</span></span></span></span><br></pre></td></tr></table></figure>
<p>之前我们写(?=) 这类匹配到的一般从[1]开始，这样写从[0]就可以匹配到，习惯了用之前的也行，毕竟这样会增加学习成本。</p>
<h3 id="6-正则匹配unicode"><a href="#6-正则匹配unicode" class="headerlink" title="6. 正则匹配unicode"></a>6. 正则匹配unicode</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//The following matches multiple hindi character</span></span><br><span class="line">/^\p&#123;Script=Devanagari&#125;+$/u.test(<span class="string">'हिन्दी'</span>); <span class="comment">//true  </span></span><br><span class="line"><span class="comment">//PS:there are 3 hindi characters h</span></span><br></pre></td></tr></table></figure>
<h2 id="Other"><a href="#Other" class="headerlink" title="Other"></a>Other</h2><h3 id="1-用来替代-Math-pow"><a href="#1-用来替代-Math-pow" class="headerlink" title="1. ** 用来替代 Math.pow"></a>1. <code>**</code> 用来替代 <code>Math.pow</code></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Math</span>.pow(<span class="number">7</span>, <span class="number">2</span>) <span class="comment">// 49  7的2次方</span></span><br><span class="line"><span class="comment">// use</span></span><br><span class="line"><span class="number">7</span>**<span class="number">2</span> <span class="comment">// 49</span></span><br></pre></td></tr></table></figure>
<h3 id="2-在函数参数中添加尾随逗号，现在不会报错了"><a href="#2-在函数参数中添加尾随逗号，现在不会报错了" class="headerlink" title="2. 在函数参数中添加尾随逗号，现在不会报错了"></a>2. 在函数参数中添加尾随逗号，现在不会报错了</h3><h3 id="3-async-await"><a href="#3-async-await" class="headerlink" title="3. async/await"></a>3. async/await</h3><p>这个用得也挺多了，同步写法的异步函数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">doubleAndAdd</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  a = <span class="keyword">await</span> doubleAfterSec(a)</span><br><span class="line">  b = <span class="keyword">await</span> doubleAfterSec(b)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> a + b</span><br><span class="line">&#125;</span><br><span class="line">doubleAndAdd(<span class="number">1</span>, <span class="number">2</span>).then(<span class="built_in">console</span>.log)</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">doubleAfterSec</span>(<span class="params">param</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">    setTimeout(resolve(param * <span class="number">2</span>), <span class="number">1000</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>来看一个高级用法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">doubleAndAdd</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    [a, b] = <span class="keyword">await</span> <span class="built_in">Promise</span>.all([doubleAfterSel(a), doubleAfterSec(b)])</span><br><span class="line">  &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(e)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> a + b</span><br><span class="line">&#125;</span><br><span class="line">doubleAndAdd(<span class="number">1</span>, <span class="number">2</span>).then(<span class="built_in">console</span>.log)</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">doubleAfterSec</span>(<span class="params">param</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">    setTimeout(resolve(param * <span class="number">2</span>), <span class="number">1000</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="4-Promise-prototype-finally"><a href="#4-Promise-prototype-finally" class="headerlink" title="4. Promise.prototype.finally()"></a>4. Promise.prototype.finally()</h3><p>主要的想法是允许在解决或拒绝帮助清理问题之后运行回调。最后回调被调用，没有任何值，无论如何都要执行。可以理解为增加了一个生命周期钩子</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> started = <span class="literal">true</span></span><br><span class="line"><span class="keyword">let</span> myPromise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  resolve(<span class="string">'all good'</span>)</span><br><span class="line">&#125;).then(<span class="function"><span class="params">val</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(val) <span class="comment">// 'all good'</span></span><br><span class="line">&#125;).catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(err)</span><br><span class="line">&#125;).finally(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'finally'</span>)</span><br><span class="line">  started = <span class="literal">false</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="5-异步迭代器"><a href="#5-异步迭代器" class="headerlink" title="5. 异步迭代器"></a>5. 异步迭代器</h3><p>这是一个非常有用的特性。基本上，它允许我们轻松地创建异步代码的循环！<br>这个特性添加了一个新的“for-awaof”循环，它允许我们调用async函数，它在循环中返回承诺（或带有一堆承诺的数组）。<br>很酷的一点是，循环等待每个承诺在执行下一个循环之前解决。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promises = [</span><br><span class="line">  <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> resolve(<span class="number">1</span>)),</span><br><span class="line">  <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> resolve(<span class="number">2</span>)),</span><br><span class="line">  <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> resolve(<span class="number">3</span>))</span><br><span class="line">]</span><br><span class="line"><span class="comment">// 之前这么用</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">test1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> obj <span class="keyword">of</span> promises) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(obj) <span class="comment">// 打印3个promise</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 现在可以</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">test2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> <span class="keyword">await</span> (<span class="keyword">const</span> obj <span class="keyword">of</span> promises) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(obj) <span class="comment">// 直接打印结果 1 2 3</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ul>
<li><p>Array方法</p>
<ol>
<li>Array.prototype.includes 是否包含某项，返回Boolean</li>
</ol>
</li>
<li><p>Object方法</p>
<ol>
<li>Object.values() 迭代器 返回value组成的对象</li>
<li>Object.entries() 迭代器，返回 k v组成的数组</li>
<li>Object.getOwnPropertyDescriptors? 取某个属性能拿到getter setter</li>
<li>对象扩展 … 点点点</li>
</ol>
</li>
<li><p>String方法</p>
<ol>
<li>padStart</li>
<li>padEnd</li>
</ol>
</li>
<li><p>正则扩展</p>
<ol>
<li>s模式 匹配换行等而不破坏字符串</li>
<li>命名组捕获</li>
<li>插入断言</li>
<li>匹配unicode</li>
</ol>
</li>
<li><p>函数扩展</p>
<ol>
<li>async/await</li>
<li>Promise.finally 钩子</li>
<li>async函数里 for 可以使用 await</li>
<li>原生方法扩展 Math.pow -&gt; <code>**</code></li>
</ol>
</li>
</ul>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Fridolph</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://blog.fridolph.top/2018/04/22/【Next】一次掌握ES6到ES8新增功能/">http://blog.fridolph.top/2018/04/22/【Next】一次掌握ES6到ES8新增功能/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://blog.fridolph.top" target="_blank">霪霖笙箫的博客</a>！</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/es6/">es6</a><a class="post-meta__tags" href="/tags/ES标准/">ES标准</a></div><nav id="pagination"><div class="prev-post pull-left"><a href="/2018/04/25/【TS】vue与typescript集成/"><i class="fa fa-chevron-left">  </i><span>【TS】vue与typescript集成</span></a></div><div class="next-post pull-right"><a href="/2018/04/17/【Vue】服务端渲染框架Nuxt入门/"><span>【Vue】服务端渲染框架Nuxt入门</span><i class="fa fa-chevron-right"></i></a></div></nav><div id="disqus_thread"></div><script>var unused = null;
var disqus_config = function () {
  this.page.url = 'http://blog.fridolph.top/2018/04/22/【Next】一次掌握ES6到ES8新增功能/';
  this.page.identifier = '2018/04/22/【Next】一次掌握ES6到ES8新增功能/';
  this.page.title = '【Next】一次掌握ES6到ES8新增功能';
}
var d = document, s = d.createElement('script');
s.src = "https://" + 'fridolph' +".disqus.com/embed.js";
s.setAttribute('data-timestamp', '' + +new Date());
(d.head || d.body).appendChild(s);</script><script id="dsq-count-src" src="https://fridolph.disqus.com/count.js" async></script></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2016 - 2024 By Fridolph</div><div class="framework-info"><span>driven - </span><a href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>theme - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="busuanzi"><script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file-o"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="/js/third-party/anime.min.js"></script><script src="/js/third-party/jquery.min.js"></script><script src="/js/third-party/jquery.fancybox.min.js"></script><script src="/js/third-party/velocity.min.js"></script><script src="/js/third-party/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.5.3"></script><script src="/js/fancybox.js?version=1.5.3"></script><script src="/js/sidebar.js?version=1.5.3"></script><script src="/js/copy.js?version=1.5.3"></script><script src="/js/fireworks.js?version=1.5.3"></script><script src="/js/transition.js?version=1.5.3"></script><script src="/js/scroll.js?version=1.5.3"></script><script src="/js/head.js?version=1.5.3"></script></body></html>